<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC 
		"-//mybatis.org//DTD Mapper 3.0//EN" 
		"https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.itbank.repository.UserDAO">
	<insert id="user_join" parameterType="user">
		insert into user_table (userid, userpw, username, phone, role, email, salt) 
			values (#{userid}, #{userpw}, #{username}, #{phone}, #{role}, #{email}, #{salt})
	</insert>
	
	<insert id="bizr_join" parameterType="user">
		insert into bizr_table (userid, userpw, username, phone,  email, salt, bizrno) 
			values (#{userid}, #{userpw}, #{username}, #{phone},  #{email}, #{salt}, #{bizrno})
	</insert>
	
	<select id="selectOneByUserid_check" resultType="string">
		SELECT
			  userid
			FROM
			  (
			    SELECT
			      userid
			    FROM
			      user_table
			    UNION ALL
			    SELECT
			      userid
			    FROM
			      bizr_table
			  )
			WHERE
			  userid = #{userid}
			GROUP BY
			  userid
			HAVING
  		COUNT(*) >= 1
	</select>
	
	<select id="getBookMark" parameterType="int" resultType="int">
		select camping_idx from bookmark where user_idx = #{user_idx}
		
	</select>
	
	
	<select id="getReserveInfo" parameterType="int">
		select
			* 
			from reserve r
			join camping c on r.camping_idx = c.camping_idx
			where r.user_idx = #{user_idx} 
	</select>
	
	<select id="getBookmarkInfo" parameterType="int">
			select
				* 
				from bookmark b
				join camping c on b.camping_idx = c.camping_idx 
				where b.user_idx = #{user_idx}
	</select>
	
	<select id="getbizrInfo" parameterType="int">
			select * from 
		    camping 
		        where user_idx = #{user_idx}
	</select>
	
	
</mapper>



